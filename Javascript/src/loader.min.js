var $loader={};!function(e){function t(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){this.readyState==this.DONE&&t({size:parseInt(n.getResponseHeader("Content-Length")),version:n.getResponseHeader("Driconmax-Script-Version")})},n.open("HEAD",e,!0),n.send()}e.script=function(e,t,n){this.name=e,this.url=t,this.size=0,this.local=void 0==n?!1:n};var n,r=[],o=0,a=0,s=-1,i=0,l=!1;e.addscript=function(e){r.push(e),e.local&&o++},e.addscripts=function(e){for(var t=0;t<e.length;t++){var n=e[t];r.push(n)}},e.start=function(){if(void 0==n){for(var d=0;d<r.length;d++){var c=r[d];c.local||!function(e){t(e.url,function(t){o++,a+=t.size,e.size=t.size,e.version=t.version})}(c)}n=setInterval(function(){if(o==r.length)if(l||void 0==e.onstart||e.onstart({totalbytes:a}),l=!0,i==r.length)clearInterval(n),e.progress=100,e.loaded=!0,void 0!=e.onload&&e.onload();else if(i!=s)try{s=i;var t=r[i];if(t.local){var d=document.createElement("script");d.type="application/javascript",d.src=t.url;var c=document.getElementsByTagName("head")[0];if(null==c||void 0==c)throw"The HTML tag HEAD is not defined";c.appendChild(d),i++}else{var p=new XMLHttpRequest;p.addEventListener("progress",function(t){if(t.lengthComputable){var n=Math.round(t.loaded/t.total*100);e.progress=100/r.length*i+n/r.length,void 0!=e.onprogresschange&&e.onprogresschange({progress:e.progress,current:{fileindex:i+1,name:r[i].name,version:r[i].version,size:t.total,progress:n},totalfiles:r.length})}},!1),p.addEventListener("load",function(e){var t=e.target,n=document.createElement("script");n.type="application/javascript",n.innerHTML=t.responseText;var r=document.getElementsByTagName("head")[0];if(null==r||void 0==r)throw"The HTML tag HEAD is not defined";r.appendChild(n),i++},!1),p.open("GET",t.url),p.send()}}catch(v){console.error("Loader error: "+v)}},100)}else console.warn("Loader already started")},e.stop=function(){void 0!=n?(clearInterval(n),console.warn("Loader stopped")):console.warn("The loader is not running")}}($loader);
//# sourceMappingURL=loader.min.js.map